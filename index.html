<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قهوتي - تصميم وتحضير القهوة المختصة</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Aref+Ruqaa:wght@400;700&family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #7D5A44;
            --secondary-color: #A67B5B;
            --accent-color: #D4A76A;
            --light-color: #F3E9DC;
            --dark-color: #3E2D22;
            --background-color: #FDF7F0;
            --text-color: #442917;
            --border-color: #D9C7B8;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        h1, h2, h3 {
            font-family: 'Aref Ruqaa', serif;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        h1 {
            font-size: 2.5rem;
            color: var(--dark-color);
        }
        
        h2 {
            font-size: 2rem;
            color: var(--primary-color);
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        h2::after {
            content: "";
            position: absolute;
            bottom: 0;
            right: 0;
            width: 100px;
            height: 3px;
            background-color: var(--accent-color);
        }
        
        p {
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            background-color: var(--dark-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .btn::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s ease, height 0.3s ease;
        }
        
        .btn:hover::after {
            width: 300px;
            height: 300px;
        }
        
        .btn-secondary {
            background-color: var(--accent-color);
            color: var(--dark-color);
        }
        
        .btn-secondary:hover {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .hero {
            height: 100vh;
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1611854779393-1b2da9d400fe?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80');
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            position: relative;
        }
        
        .hero-content {
            z-index: 1;
            max-width: 800px;
            padding: 2rem;
        }
        
        .hero-title {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            color: white;
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .section {
            padding: 5rem 0;
            position: relative;
        }
        
        .section-alt {
            background-color: rgba(213, 184, 158, 0.15);
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .section-title::after {
            right: 50%;
            transform: translateX(50%);
        }
        
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12);
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        .card-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .progress-bar {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            padding: 1rem 0;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }
        
        .progress-steps::before {
            content: "";
            position: absolute;
            top: 13px;
            right: 10%;
            width: 80%;
            height: 4px;
            background-color: var(--border-color);
            z-index: -1;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
        }
        
        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--light-color);
            color: var(--primary-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .step.active .step-number {
            background-color: var(--primary-color);
            color: white;
            transform: scale(1.2);
        }
        
        .step-label {
            font-size: 0.875rem;
            color: var(--dark-color);
            text-align: center;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
        }
        
        .country-card {
            border: 2px solid transparent;
            cursor: pointer;
            text-align: center;
            padding: 1rem;
            border-radius: 0.5rem;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }
        
        .country-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .country-card.selected {
            border-color: var(--primary-color);
            background-color: rgba(125, 90, 68, 0.05);
        }
        
        .country-flag {
            width: 60px;
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 0.75rem;
        }
        
        .country-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .roast-options {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .roast-option {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 2px solid transparent;
            padding: 1rem;
            border-radius: 0.5rem;
            background-color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .roast-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .roast-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(125, 90, 68, 0.05);
        }
        
        .roast-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-bottom: 0.75rem;
        }
        
        .roast-light {
            background-color: #E1C4A0;
        }
        
        .roast-medium {
            background-color: #A67B5B;
        }
        
        .roast-dark {
            background-color: #4A2C2A;
        }
        
        .bean-types {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .bean-type {
            flex: 1;
            min-width: 200px;
            text-align: center;
            border: 2px solid transparent;
            padding: 1.5rem;
            border-radius: 0.5rem;
            background-color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }
        
        .bean-type:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .bean-type.selected {
            border-color: var(--primary-color);
            background-color: rgba(125, 90, 68, 0.05);
        }
        
        .bean-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 50%;
            margin-bottom: 1rem;
        }
        
        .bean-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        
        .bean-desc {
            font-size: 0.9rem;
            color: #666;
        }
        
        .characteristics {
            margin: 3rem 0;
        }
        
        .characteristic {
            margin-bottom: 2rem;
        }
        
        .characteristic-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .characteristic-name {
            font-weight: 600;
        }
        
        .range-container {
            position: relative;
            height: 30px;
        }
        
        .range-slider {
            width: 100%;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .range-slider::-webkit-slider-thumb:hover {
            background: var(--secondary-color);
            transform: scale(1.2);
        }
        
        .preparation-methods {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .preparation-method {
            flex: 1;
            min-width: 200px;
            text-align: center;
            border: 2px solid transparent;
            padding: 1.5rem;
            border-radius: 0.5rem;
            background-color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }
        
        .preparation-method:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .preparation-method.selected {
            border-color: var(--primary-color);
            background-color: rgba(125, 90, 68, 0.05);
        }
        
        .preparation-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .preparation-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        
        .preparation-desc {
            font-size: 0.9rem;
            color: #666;
        }
        
        .ratio-calculator {
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin: 2rem 0;
        }
        
        .calculator-form {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .ratio-result {
            background-color: var(--light-color);
            padding: 1rem;
            border-radius: 0.25rem;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
        }
        
        .radar-chart-container {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .flavor-profile {
            margin: 3rem 0;
        }
        
        .share-section {
            margin: 3rem 0;
            text-align: center;
        }
        
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .share-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.25rem;
            text-decoration: none;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .share-whatsapp {
            background-color: #25D366;
        }
        
        .share-whatsapp:hover {
            background-color: #128C7E;
        }
        
        .share-instagram {
            background-color: #C13584;
        }
        
        .share-instagram:hover {
            background-color: #8a3ab9;
        }
        
        .coffee-divider {
            display: flex;
            align-items: center;
            margin: 2rem 0;
        }
        
        .coffee-divider::before, .coffee-divider::after {
            content: "";
            flex: 1;
            height: 1px;
            background-color: var(--border-color);
        }
        
        .coffee-divider-icon {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin: 0 1rem;
        }
        
        .footer {
            background-color: var(--dark-color);
            color: white;
            padding: 3rem 0;
            text-align: center;
        }
        
        .footer-logo {
            font-family: 'Aref Ruqaa', serif;
            font-size: 2rem;
            margin-bottom: 1rem;
            color: white;
        }
        
        .footer-text {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
        }
        
        .footer-contact {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .footer-social {
            margin: 1.5rem 0;
        }
        
        .social-link {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            margin: 0 0.5rem;
            transition: all 0.3s ease;
        }
        
        .social-link:hover {
            background-color: var(--accent-color);
            transform: translateY(-3px);
        }
        
        .footer-copy {
            margin-top: 2rem;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.2rem;
            }
            
            .btn-group {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .progress-steps {
                overflow-x: auto;
                padding: 0 1rem;
            }
            
            .step-label {
                font-size: 0.75rem;
            }
            
            .roast-options {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .preparation-method {
                min-width: 100%;
            }
            
            .bean-type {
                min-width: 100%;
            }
        }
        
        /* Arabesque patterns and decorations */
        .arabesque-pattern {
            position: absolute;
            width: 100%;
            height: 80px;
            background-image: url('https://cdn.jsdelivr.net/gh/Allaev/arabesque-patterns@main/src/img/pattern1.svg');
            background-repeat: repeat-x;
            background-size: contain;
            opacity: 0.1;
        }
        
        .pattern-top {
            top: 0;
        }
        
        .pattern-bottom {
            bottom: 0;
            transform: rotate(180deg);
        }
        
        .decorative-title {
            position: relative;
            display: inline-block;
            padding: 0 2rem;
            margin-bottom: 2rem;
        }
        
        .decorative-title::before, .decorative-title::after {
            content: "☕";
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-color);
            font-size: 1.5rem;
        }
        
        .decorative-title::before {
            right: 0;
        }
        
        .decorative-title::after {
            left: 0;
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background-color: var(--dark-color);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s ease forwards;
        }
        
        @keyframes slideIn {
            0% {
                transform: translateX(100%);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            0% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark-color);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 0.5rem;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--dark-color) transparent transparent transparent;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero" id="hero">
        <div class="hero-content">
            <h1 class="hero-title">قهوتي</h1>
            <p class="hero-subtitle">تجربة فريدة لتصميم وتحضير القهوة المختصة</p>
            <div class="btn-group">
                <a href="#design-flavor" class="btn">تصميم النكهة</a>
                <a href="#prepare-coffee" class="btn btn-secondary">تحضير القهوة</a>
            </div>
        </div>
    </section>
    
    <!-- Progress Bar -->
    <div class="progress-bar" id="progress-bar">
        <div class="progress-steps">
            <div class="step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">اختيار البلد</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">درجة التحميص</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">نوع الحبوب</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">الخصائص الحسية</div>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">التحضير</div>
            </div>
            <div class="step" data-step="6">
                <div class="step-number">6</div>
                <div class="step-label">المشاركة</div>
            </div>
        </div>
    </div>
    
    <!-- Design Flavor Section -->
    <section class="section" id="design-flavor">
        <div class="container">
            <h2 class="section-title decorative-title">تصميم نكهتك الخاصة</h2>
            <p class="text-center">اختر الخصائص المثالية للقهوة التي تناسب ذوقك</p>
            
            <div class="coffee-divider">
                <span class="coffee-divider-icon">☕</span>
            </div>
            
            <!-- Country Selection -->
            <div class="section-content" id="country-selection">
                <h3>اختر بلد المنشأ</h3>
                <p>بلد المنشأ يحدد الخصائص الأساسية للقهوة من خلال المناخ والتربة والارتفاع</p>
                
                <div class="grid">
                    <div class="country-card" data-country="ethiopia" onclick="selectCountry(this)">
                        <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/flags/4x3/et.svg" alt="إثيوبيا" class="country-flag">
                        <div class="country-name">إثيوبيا</div>
                        <div class="country-feature">حموضة عالية، نكهات زهرية</div>
                    </div>
                    <div class="country-card" data-country="brazil" onclick="selectCountry(this)">
                        <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/flags/4x3/br.svg" alt="البرازيل" class="country-flag">
                        <div class="country-name">البرازيل</div>
                        <div class="country-feature">جسم قوي، حلاوة عالية</div>
                    </div>
                    <div class="country-card" data-country="colombia" onclick="selectCountry(this)">
                        <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/flags/4x3/co.svg" alt="كولومبيا" class="country-flag">
                        <div class="country-name">كولومبيا</div>
                        <div class="country-feature">متوازنة، نكهات فواكه</div>
                    </div>
                    <div class="country-card" data-country="yemen" onclick="selectCountry(this)">
                        <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/flags/4x3/ye.svg" alt="اليمن" class="country-flag">
                        <div class="country-name">اليمن</div>
                        <div class="country-feature">نكهات توابل، فواكه مجففة</div>
                    </div>
                    <div class="country-card" data-country="indonesia" onclick="selectCountry(this)">
                        <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/flags/4x3/id.svg" alt="إندونيسيا" class="country-flag">
                        <div class="country-name">إندونيسيا</div>
                        <div class="country-feature">جسم ثقيل، نكهات ترابية</div>
                    </div>
                    <div class="country-card" data-country="costa-rica" onclick="selectCountry(this)">
                        <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/flags/4x3/cr.svg" alt="كوستاريكا" class="country-flag">
                        <div class="country-name">كوستاريكا</div>
                        <div class="country-feature">حموضة معتدلة، نكهة فواكه</div>
                    </div>
                    <div class="country-card" data-country="kenya" onclick="selectCountry(this)">
                        <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/flags/4x3/ke.svg" alt="كينيا" class="country-flag">
                        <div class="country-name">كينيا</div>
                        <div class="country-feature">حموضة لاذعة، نكهة توت</div>
                    </div>
                    <div class="country-card" data-country="guatemala" onclick="selectCountry(this)">
                        <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/flags/4x3/gt.svg" alt="غواتيمالا" class="country-flag">
                        <div class="country-name">غواتيمالا</div>
                        <div class="country-feature">حلاوة، نكهات حمضيات</div>
                    </div>
                </div>
            </div>
            
            <div class="coffee-divider">
                <span class="coffee-divider-icon">☕</span>
            </div>
            
            <!-- Roast Degree -->
            <div class="section-content" id="roast-selection">
                <h3>اختر درجة التحميص</h3>
                <p>درجة التحميص تؤثر بشكل كبير على النكهة، الحموضة، والمرارة</p>
                
                <div class="roast-options">
                    <div class="roast-option" data-roast="light" onclick="selectRoast(this)">
                        <div class="roast-circle roast-light"></div>
                        <div class="roast-name">تحميص خفيف</div>
                        <div class="roast-desc">حموضة عالية، نكهات فاكهية وزهرية واضحة</div>
                    </div>
                    <div class="roast-option" data-roast="medium" onclick="selectRoast(this)">
                        <div class="roast-circle roast-medium"></div>
                        <div class="roast-name">تحميص متوسط</div>
                        <div class="roast-desc">توازن بين الحموضة والمرارة، نكهات متنوعة</div>
                    </div>
                    <div class="roast-option" data-roast="dark" onclick="selectRoast(this)">
                        <div class="roast-circle roast-dark"></div>
                        <div class="roast-name">تحميص داكن</div>
                        <div class="roast-desc">مرارة عالية، نكهات محروقة، جسم ثقيل</div>
                    </div>
                </div>
            </div>
            
            <div class="coffee-divider">
                <span class="coffee-divider-icon">☕</span>
            </div>
            
            <!-- Bean Types -->
            <div class="section-content" id="bean-selection">
                <h3>اختر نوع الحبوب</h3>
                <p>نوع الحبوب له تأثير كبير على نكهة وخصائص القهوة النهائية</p>
                
                <div class="bean-types">
                    <div class="bean-type" data-bean="arabica" onclick="selectBean(this)">
                        <img src="https://images.unsplash.com/photo-1610889556528-9a770e32642f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="أرابيكا" class="bean-image">
                        <div class="bean-name">أرابيكا</div>
                        <div class="bean-desc">نكهات متنوعة، حموضة أعلى، حلاوة واضحة. تشكل 60-70% من إنتاج القهوة العالمي.</div>
                    </div>
                    <div class="bean-type" data-bean="robusta" onclick="selectBean(this)">
                        <img src="https://images.unsplash.com/photo-1593543396541-9cde27526e94?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="روبوستا" class="bean-image">
                        <div class="bean-name">روبوستا</div>
                        <div class="bean-desc">نكهة أقوى، مرارة أعلى، نسبة كافيين أعلى. تستخدم غالباً في الإسبريسو وخلطات القهوة الإيطالية.</div>
                    </div>
                    <div class="bean-type" data-bean="liberica" onclick="selectBean(this)">
                        <img src="https://images.unsplash.com/photo-1595434091143-b375ced5fe5c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="ليبريكا" class="bean-image">
                        <div class="bean-name">ليبريكا</div>
                        <div class="bean-desc">حبوب كبيرة الحجم، نكهة فريدة تجمع بين طعم الفاكهة والزهور. نادرة وتزرع بشكل أساسي في آسيا.</div>
                    </div>
                </div>
            </div>
            
            <div class="coffee-divider">
                <span class="coffee-divider-icon">☕</span>
            </div>
            
            <!-- Characteristics -->
            <div class="section-content" id="characteristics-selection">
                <h3>الخصائص الحسية</h3>
                <p>اضبط الخصائص الحسية لتناسب ذوقك الشخصي</p>
                
                <div class="characteristics">
                    <div class="characteristic">
                        <div class="characteristic-label">
                            <span class="characteristic-name">الحموضة</span>
                            <span class="characteristic-value" id="acidity-value">3</span>
                        </div>
                        <div class="range-container">
                            <input type="range" min="1" max="5" value="3" class="range-slider" id="acidity-slider" oninput="updateCharacteristic('acidity', this.value)">
                        </div>
                    </div>
                    
                    <div class="characteristic">
                        <div class="characteristic-label">
                            <span class="characteristic-name">المرارة</span>
                            <span class="characteristic-value" id="bitterness-value">3</span>
                        </div>
                        <div class="range-container">
                            <input type="range" min="1" max="5" value="3" class="range-slider" id="bitterness-slider" oninput="updateCharacteristic('bitterness', this.value)">
                        </div>
                    </div>
                    
                    <div class="characteristic">
                        <div class="characteristic-label">
                            <span class="characteristic-name">الحلاوة</span>
                            <span class="characteristic-value" id="sweetness-value">3</span>
                        </div>
                        <div class="range-container">
                            <input type="range" min="1" max="5" value="3" class="range-slider" id="sweetness-slider" oninput="updateCharacteristic('sweetness', this.value)">
                        </div>
                    </div>
                    
                    <div class="characteristic">
                        <div class="characteristic-label">
                            <span class="characteristic-name">الجسم</span>
                            <span class="characteristic-value" id="body-value">3</span>
                        </div>
                        <div class="range-container">
                            <input type="range" min="1" max="5" value="3" class="range-slider" id="body-slider" oninput="updateCharacteristic('body', this.value)">
                        </div>
                    </div>
                    
                    <div class="characteristic">
                        <div class="characteristic-label">
                            <span class="characteristic-name">التعقيد</span>
                            <span class="characteristic-value" id="complexity-value">3</span>
                        </div>
                        <div class="range-container">
                            <input type="range" min="1" max="5" value="3" class="range-slider" id="complexity-slider" oninput="updateCharacteristic('complexity', this.value)">
                        </div>
                    </div>
                </div>
                
                <div class="flavor-profile">
                    <h3>ملف النكهة</h3>
                    <div class="radar-chart-container">
                        <canvas id="flavor-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Coffee Preparation Section -->
    <section class="section section-alt" id="prepare-coffee">
        <div class="arabesque-pattern pattern-top"></div>
        <div class="container">
            <h2 class="section-title decorative-title">تحضير القهوة</h2>
            <p class="text-center">اختر طريقة التحضير المناسبة واضبط الإعدادات للحصول على أفضل نتيجة</p>
            
            <div class="preparation-methods">
                <div class="preparation-method" data-method="espresso" onclick="selectPreparationMethod(this)">
                    <i class="fas fa-coffee preparation-icon"></i>
                    <div class="preparation-name">إسبريسو</div>
                    <div class="preparation-desc">ماء ساخن مضغوط عبر القهوة المطحونة بشكل ناعم. يعطي قهوة مركزة بطعم قوي.</div>
                </div>
                
                <div class="preparation-method" data-method="french-press" onclick="selectPreparationMethod(this)">
                    <i class="fas fa-glass-whiskey preparation-icon"></i>
                    <div class="preparation-name">فرنش برس</div>
                    <div class="preparation-desc">طريقة غمر تعطي قهوة ذات جسم ثقيل. سهلة التحضير وتبرز نكهات القهوة الطبيعية.</div>
                </div>
                
                <div class="preparation-method" data-method="v60" onclick="selectPreparationMethod(this)">
                    <i class="fas fa-filter preparation-icon"></i>
                    <div class="preparation-name">V60</div>
                    <div class="preparation-desc">طريقة تقطير تبرز الحموضة والنكهات الدقيقة. تعطي قهوة صافية ونظيفة.</div>
                </div>
                
                <div class="preparation-method" data-method="aeropress" onclick="selectPreparationMethod(this)">
                    <i class="fas fa-tint preparation-icon"></i>
                    <div class="preparation-name">إيروبرس</div>
                    <div class="preparation-desc">مزيج بين الغمر والضغط. تعطي قهوة نظيفة ولكن بجسم قوي.</div>
                </div>
                
                <div class="preparation-method" data-method="cold-brew" onclick="selectPreparationMethod(this)">
                    <i class="fas fa-snowflake preparation-icon"></i>
                    <div class="preparation-name">كولد برو</div>
                    <div class="preparation-desc">تخمير بارد لساعات طويلة. يعطي قهوة أقل حموضة ومرارة وأكثر حلاوة.</div>
                </div>
            </div>
            
            <div class="ratio-calculator">
                <h3>حاسبة نسبة القهوة إلى الماء (الريشو)</h3>
                <p>نسبة القهوة إلى الماء من أهم العوامل التي تؤثر على مذاق القهوة النهائي</p>
                
                <div class="calculator-form">
                    <div>
                        <div class="form-group">
                            <label class="form-label">اختر نسبة الريشو</label>
                            <select class="form-control" id="ratio-select" onchange="calculateRatio()">
                                <option value="14">1:14 (مناسب للإسبريسو)</option>
                                <option value="15">1:15 (مناسب للفرنش برس)</option>
                                <option value="16" selected>1:16 (متوازن للأيروبرس)</option>
                                <option value="17">1:17 (مناسب للتقطير V60)</option>
                                <option value="18">1:18 (مناسب للكولد برو)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">وزن القهوة (جرام)</label>
                            <input type="number" class="form-control" id="coffee-weight" value="15" min="1" oninput="calculateWaterFromCoffee()">
                        </div>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label class="form-label">كمية الماء (مل)</label>
                            <input type="number" class="form-control" id="water-amount" value="240" min="1" oninput="calculateCoffeeFromWater()">
                        </div>
                        <div class="ratio-result" id="ratio-result">
                            لتحضير قهوة مثالية، استخدم 15 جرام من القهوة مع 240 مل من الماء
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="coffee-divider">
                <span class="coffee-divider-icon">☕</span>
            </div>
            
            <div class="section-content" id="preparation-details">
                <h3>تفاصيل التحضير</h3>
                <p id="preparation-desc">اختر طريقة التحضير أعلاه للحصول على التفاصيل</p>
                
                <div class="card" id="preparation-card" style="display: none;">
                    <div class="card-body">
                        <h4 class="card-title" id="preparation-title">طريقة التحضير</h4>
                        <div id="preparation-steps">
                            <!-- Steps will be filled dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="arabesque-pattern pattern-bottom"></div>
    </section>
    
    <!-- Share Section -->
    <section class="section" id="share-section">
        <div class="container">
            <h2 class="section-title decorative-title">شارك وصفتك</h2>
            <p class="text-center">شارك وصفة القهوة الخاصة بك مع أصدقائك</p>
            
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title">ملخص الوصفة</h3>
                    
                    <div id="recipe-summary">
                        <p><strong>بلد المنشأ:</strong> <span id="summary-country">لم يتم الاختيار</span></p>
                        <p><strong>درجة التحميص:</strong> <span id="summary-roast">لم يتم الاختيار</span></p>
                        <p><strong>نوع الحبوب:</strong> <span id="summary-bean">لم يتم الاختيار</span></p>
                        <p><strong>الخصائص الحسية:</strong></p>
                        <ul>
                            <li>الحموضة: <span id="summary-acidity">3</span>/5</li>
                            <li>المرارة: <span id="summary-bitterness">3</span>/5</li>
                            <li>الحلاوة: <span id="summary-sweetness">3</span>/5</li>
                            <li>الجسم: <span id="summary-body">3</span>/5</li>
                            <li>التعقيد: <span id="summary-complexity">3</span>/5</li>
                        </ul>
                        <p><strong>طريقة التحضير:</strong> <span id="summary-method">لم يتم الاختيار</span></p>
                        <p><strong>نسبة الريشو:</strong> <span id="summary-ratio">1:16</span></p>
                        <p><strong>كمية القهوة:</strong> <span id="summary-coffee-weight">15</span> جرام</p>
                        <p><strong>كمية الماء:</strong> <span id="summary-water-amount">240</span> مل</p>
                    </div>
                    
                    <div class="share-buttons">
                        <a href="#" class="share-button share-whatsapp" onclick="shareWhatsApp()">
                            <i class="fab fa-whatsapp"></i> مشاركة عبر واتساب
                        </a>
                        <a href="https://instagram.com/alyazeedi.s" target="_blank" class="share-button share-instagram">
                            <i class="fab fa-instagram"></i> متابعة على انستجرام
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Glossary Section -->
    <section class="section section-alt" id="glossary">
        <div class="arabesque-pattern pattern-top"></div>
        <div class="container">
            <h2 class="section-title decorative-title">مصطلحات القهوة</h2>
            <p class="text-center">تعرف على أهم المصطلحات في عالم القهوة المختصة</p>
            
            <div class="grid">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">الريشو (Ratio)</h4>
                        <p>نسبة وزن القهوة إلى وزن الماء المستخدم في التحضير. يؤثر بشكل كبير على قوة ونكهة القهوة.</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">الحموضة (Acidity)</h4>
                        <p>الطعم الحمضي اللامع في القهوة. قد تكون حموضة كالتفاح أو الحمضيات، وهي صفة إيجابية في القهوة المختصة.</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">المرارة (Bitterness)</h4>
                        <p>طعم مر في القهوة، يزداد مع درجة التحميص ويرتبط أيضًا بالاستخلاص الزائد.</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">الحلاوة (Sweetness)</h4>
                        <p>الطعم الحلو الطبيعي في القهوة، يمكن أن يشبه السكر البني، العسل، أو الكراميل.</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">الجسم (Body)</h4>
                        <p>إحساس الثقل أو الكثافة للقهوة في الفم. يمكن وصفه بالخفيف، المتوسط، أو الثقيل.</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">درجة الطحن (Grind Size)</h4>
                        <p>حجم جزيئات القهوة المطحونة، تختلف حسب طريقة التحضير. كلما كانت أدق، كان الاستخلاص أسرع.</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">البلوم (Bloom)</h4>
                        <p>مرحلة التهوية الأولية عند إضافة القليل من الماء للقهوة لإطلاق ثاني أكسيد الكربون قبل بدء التخمير.</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">الكريما (Crema)</h4>
                        <p>طبقة ذهبية رغوية تتشكل على سطح الإسبريسو، تدل على طزاجة القهوة وجودة التحضير.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="arabesque-pattern pattern-bottom"></div>
    </section>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-logo">قهوتي</div>
            <p class="footer-text">رحلة في عالم القهوة المختصة</p>
            
            <div class="footer-contact">
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <span>alyazeede@gmail.com</span>
                </div>
            </div>
            
            <div class="footer-social">
                <a href="https://instagram.com/alyazeedi.s" target="_blank" class="social-link">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
            
            <div class="footer-copy">
                &copy; 2023 قهوتي - تصميم سلطان اليزيدي
            </div>
        </div>
    </footer>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    
    <script>
        // Initialize flavor chart
        const flavorChart = new Chart(
            document.getElementById('flavor-chart'),
            {
                type: 'radar',
                data: {
                    labels: ['الحموضة', 'المرارة', 'الحلاوة', 'الجسم', 'التعقيد'],
                    datasets: [{
                        label: 'خصائص النكهة',
                        data: [3, 3, 3, 3, 3],
                        backgroundColor: 'rgba(166, 123, 91, 0.2)',
                        borderColor: 'rgba(125, 90, 68, 1)',
                        pointBackgroundColor: 'rgba(212, 167, 106, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(125, 90, 68, 1)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 5,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            }
        );
        
        // Variables to store selections
        let selectedCountry = null;
        let selectedRoast = null;
        let selectedBean = null;
        let selectedPreparationMethod = null;
        
        // Characteristics values
        const characteristics = {
            acidity: 3,
            bitterness: 3,
            sweetness: 3,
            body: 3,
            complexity: 3
        };
        
        // Preparation methods details
        const preparationDetails = {
            'espresso': {
                title: 'تحضير الإسبريسو',
                steps: [
                    'اطحن القهوة بدرجة طحن ناعمة جدًا.',
                    'ضع 18-20 جرام من القهوة في البورتافلتر.',
                    'وزع القهوة بالتساوي واضغط عليها بضغط متساوٍ.',
                    'ركب البورتافلتر في الماكينة واستخرج 25-30 مل من الإسبريسو في 25-30 ثانية.',
                    'قدم فورًا للاستمتاع بالكريما والنكهة الكاملة.'
                ]
            },
            'french-press': {
                title: 'تحضير الفرنش برس',
                steps: [
                    'اطحن القهوة بدرجة طحن خشنة.',
                    'سخن الماء لدرجة حرارة 93-96 درجة مئوية.',
                    'ضع القهوة في الفرنش برس وأضف الماء الساخن.',
                    'حرك برفق لضمان تبلل جميع حبيبات القهوة.',
                    'ضع الغطاء بدون ضغط المكبس واترك القهوة تتخمر لمدة 4 دقائق.',
                    'اضغط المكبس للأسفل ببطء وثبات.',
                    'قدم القهوة فورًا.'
                ]
            },
            'v60': {
                title: 'تحضير V60',
                steps: [
                    'ضع فلتر الورق في V60 واشطفه بالماء الساخن.',
                    'اطحن القهوة بدرجة طحن متوسطة-ناعمة.',
                    'ضع القهوة في الفلتر وحفر حفرة صغيرة في المنتصف.',
                    'سخن الماء لدرجة حرارة 92-96 درجة مئوية.',
                    'صب كمية قليلة من الماء (ضعف وزن القهوة) للتهوية واترك 30-45 ثانية.',
                    'أكمل صب الماء بشكل دائري من المركز للخارج على دفعات.',
                    'دع القهوة تقطر تمامًا، يجب أن تستغرق العملية 2.5-3 دقائق.'
                ]
            },
            'aeropress': {
                title: 'تحضير الإيروبرس',
                steps: [
                    'اطحن القهوة بدرجة طحن متوسطة-ناعمة.',
                    'ضع الفلتر في الغطاء واشطفه بالماء الساخن.',
                    'جمع الإيروبرس وضعه على الكوب.',
                    'أضف القهوة ثم الماء بدرجة حرارة 85-95 درجة مئوية.',
                    'حرك المزيج لمدة 10 ثوانٍ.',
                    'اترك لمدة 1-2 دقيقة للتخمير.',
                    'ضع الغطاء واقلب الإيروبرس على الكوب.',
                    'اضغط ببطء وثبات لمدة 20-30 ثانية.'
                ]
            },
            'cold-brew': {
                title: 'تحضير الكولد برو',
                steps: [
                    'اطحن القهوة بدرجة طحن خشنة جدًا.',
                    'ضع القهوة في وعاء وأضف الماء البارد بنسبة 1:8 (قهوة:ماء).',
                    'حرك جيدًا لضمان تبلل جميع حبيبات القهوة.',
                    'غطِ الوعاء واتركه في الثلاجة لمدة 12-24 ساعة.',
                    'صفِّ القهوة باستخدام فلتر ورقي أو قماشي.',
                    'خفف التركيز حسب الرغبة بإضافة الماء أو الثلج.',
                    'يمكن تخزين الكولد برو في الثلاجة لمدة تصل إلى أسبوعين.'
                ]
            }
        };
        
        // Functions to handle user interaction
        function selectCountry(element) {
            // Remove selected class from all countries
            document.querySelectorAll('.country-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to clicked country
            element.classList.add('selected');
            
            // Store selected country
            selectedCountry = element.dataset.country;
            
            // Update country in summary
            document.getElementById('summary-country').textContent = element.querySelector('.country-name').textContent;
            
            // Update characteristics based on country
            updateCharacteristicsBasedOnCountry(selectedCountry);
            
            // Show toast notification
            showToast(`تم اختيار ${element.querySelector('.country-name').textContent}`);
            
            // Update progress bar
            updateProgress(2);
        }
        
        function selectRoast(element) {
            // Remove selected class from all roasts
            document.querySelectorAll('.roast-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked roast
            element.classList.add('selected');
            
            // Store selected roast
            selectedRoast = element.dataset.roast;
            
            // Update roast in summary
            document.getElementById('summary-roast').textContent = element.querySelector('.roast-name').textContent;
            
            // Update characteristics based on roast
            updateCharacteristicsBasedOnRoast(selectedRoast);
            
            // Show toast notification
            showToast(`تم اختيار ${element.querySelector('.roast-name').textContent}`);
            
            // Update progress bar
            updateProgress(3);
        }
        
        function selectBean(element) {
            // Remove selected class from all beans
            document.querySelectorAll('.bean-type').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked bean
            element.classList.add('selected');
            
            // Store selected bean
            selectedBean = element.dataset.bean;
            
            // Update bean in summary
            document.getElementById('summary-bean').textContent = element.querySelector('.bean-name').textContent;
            
            // Update characteristics based on bean
            updateCharacteristicsBasedOnBean(selectedBean);
            
            // Show toast notification
            showToast(`تم اختيار ${element.querySelector('.bean-name').textContent}`);
            
            // Update progress bar
            updateProgress(4);
        }
        
        function selectPreparationMethod(element) {
            // Remove selected class from all methods
            document.querySelectorAll('.preparation-method').forEach(method => {
                method.classList.remove('selected');
            });
            
            // Add selected class to clicked method
            element.classList.add('selected');
            
            // Store selected preparation method
            selectedPreparationMethod = element.dataset.method;
            
            // Update method in summary
            document.getElementById('summary-method').textContent = element.querySelector('.preparation-name').textContent;
            
            // Show preparation details
            updatePreparationDetails(selectedPreparationMethod);
            
            // Show toast notification
            showToast(`تم اختيار ${element.querySelector('.preparation-name').textContent}`);
            
            // Update progress bar
            updateProgress(5);
        }
        
        function updateCharacteristic(characteristic, value) {
            // Update value in characteristics object
            characteristics[characteristic] = parseInt(value);
            
            // Update value display
            document.getElementById(`${characteristic}-value`).textContent = value;
            
            // Update chart
            updateFlavorChart();
            
            // Update summary
            document.getElementById(`summary-${characteristic}`).textContent = value;
        }
        
        function updateFlavorChart() {
            flavorChart.data.datasets[0].data = [
                characteristics.acidity,
                characteristics.bitterness,
                characteristics.sweetness,
                characteristics.body,
                characteristics.complexity
            ];
            flavorChart.update();
        }
        
        function calculateRatio() {
            const ratio = parseInt(document.getElementById('ratio-select').value);
            const coffeeWeight = parseInt(document.getElementById('coffee-weight').value);
            const waterAmount = coffeeWeight * ratio;
            
            document.getElementById('water-amount').value = waterAmount;
            document.getElementById('ratio-result').textContent = `لتحضير قهوة مثالية، استخدم ${coffeeWeight} جرام من القهوة مع ${waterAmount} مل من الماء`;
            
            // Update summary
            document.getElementById('summary-ratio').textContent = `1:${ratio}`;
            document.getElementById('summary-coffee-weight').textContent = coffeeWeight;
            document.getElementById('summary-water-amount').textContent = waterAmount;
        }
        
        function calculateWaterFromCoffee() {
            const ratio = parseInt(document.getElementById('ratio-select').value);
            const coffeeWeight = parseInt(document.getElementById('coffee-weight').value);
            const waterAmount = coffeeWeight * ratio;
            
            document.getElementById('water-amount').value = waterAmount;
            document.getElementById('ratio-result').textContent = `لتحضير قهوة مثالية، استخدم ${coffeeWeight} جرام من القهوة مع ${waterAmount} مل من الماء`;
            
            // Update summary
            document.getElementById('summary-coffee-weight').textContent = coffeeWeight;
            document.getElementById('summary-water-amount').textContent = waterAmount;
        }
        
        function calculateCoffeeFromWater() {
            const ratio = parseInt(document.getElementById('ratio-select').value);
            const waterAmount = parseInt(document.getElementById('water-amount').value);
            const coffeeWeight = Math.round(waterAmount / ratio);
            
            document.getElementById('coffee-weight').value = coffeeWeight;
            document.getElementById('ratio-result').textContent = `لتحضير قهوة مثالية، استخدم ${coffeeWeight} جرام من القهوة مع ${waterAmount} مل من الماء`;
            
            // Update summary
            document.getElementById('summary-coffee-weight').textContent = coffeeWeight;
            document.getElementById('summary-water-amount').textContent = waterAmount;
        }
        
        function updatePreparationDetails(method) {
            const card = document.getElementById('preparation-card');
            const title = document.getElementById('preparation-title');
            const steps = document.getElementById('preparation-steps');
            const desc = document.getElementById('preparation-desc');
            
            if (method && preparationDetails[method]) {
                title.textContent = preparationDetails[method].title;
                
                // Clear previous steps
                steps.innerHTML = '';
                
                // Add steps
                const stepsList = document.createElement('ol');
                stepsList.style.paddingRight = '1.5rem';
                preparationDetails[method].steps.forEach(step => {
                    const listItem = document.createElement('li');
                    listItem.textContent = step;
                    listItem.style.marginBottom = '0.5rem';
                    stepsList.appendChild(listItem);
                });
                steps.appendChild(stepsList);
                
                // Show card and hide description
                card.style.display = 'block';
                desc.style.display = 'none';
            } else {
                // Hide card and show description
                card.style.display = 'none';
                desc.style.display = 'block';
            }
        }
        
        function updateProgress(step) {
            // Remove active class from all steps
            document.querySelectorAll('.step').forEach(stepElement => {
                stepElement.classList.remove('active');
            });
            
            // Add active class to current step and all previous steps
            for (let i = 1; i <= step; i++) {
                const stepElement = document.querySelector(`.step[data-step="${i}"]`);
                if (stepElement) {
                    stepElement.classList.add('active');
                }
            }
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.display = 'block';
            
            // Hide toast after 3 seconds
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    toast.style.display = 'none';
                    toast.style.animation = '';
                }, 300);
            }, 3000);
        }
        
        function shareWhatsApp() {
            const country = document.getElementById('summary-country').textContent;
            const roast = document.getElementById('summary-roast').textContent;
            const bean = document.getElementById('summary-bean').textContent;
            const method = document.getElementById('summary-method').textContent;
            const ratio = document.getElementById('summary-ratio').textContent;
            const coffeeWeight = document.getElementById('summary-coffee-weight').textContent;
            const waterAmount = document.getElementById('summary-water-amount').textContent;
            
            const message = `*وصفة قهوتي المميزة* ☕\n\n` +
                `*بلد المنشأ:* ${country}\n` +
                `*درجة التحميص:* ${roast}\n` +
                `*نوع الحبوب:* ${bean}\n\n` +
                `*الخصائص الحسية:*\n` +
                `• الحموضة: ${characteristics.acidity}/5\n` +
                `• المرارة: ${characteristics.bitterness}/5\n` +
                `• الحلاوة: ${characteristics.sweetness}/5\n` +
                `• الجسم: ${characteristics.body}/5\n` +
                `• التعقيد: ${characteristics.complexity}/5\n\n` +
                `*طريقة التحضير:* ${method}\n` +
                `*نسبة الريشو:* ${ratio}\n` +
                `*كمية القهوة:* ${coffeeWeight} جرام\n` +
                `*كمية الماء:* ${waterAmount} مل\n\n` +
                `صمم وصفتك الخاصة على موقع قهوتي!`;
            
            // Encode message for WhatsApp URL
            const encodedMessage = encodeURIComponent(message);
            
            // Open WhatsApp share link
            window.open(`https://wa.me/?text=${encodedMessage}`, '_blank');
        }
        
        function updateCharacteristicsBasedOnCountry(country) {
            // Default values if no country is selected
            let acidity = 3;
            let bitterness = 3;
            let sweetness = 3;
            let body = 3;
            let complexity = 3;
            
            // Adjust values based on country
            switch(country) {
                case 'ethiopia':
                    acidity = 5;
                    bitterness = 2;
                    sweetness = 4;
                    body = 2;
                    complexity = 5;
                    break;
                case 'brazil':
                    acidity = 2;
                    bitterness = 3;
                    sweetness = 4;
                    body = 4;
                    complexity = 3;
                    break;
                case 'colombia':
                    acidity = 4;
                    bitterness = 3;
                    sweetness = 3;
                    body = 3;
                    complexity = 4;
                    break;
                case 'yemen':
                    acidity = 3;
                    bitterness = 3;
                    sweetness = 4;
                    body = 4;
                    complexity = 5;
                    break;
                case 'indonesia':
                    acidity = 2;
                    bitterness = 4;
                    sweetness = 2;
                    body = 5;
                    complexity = 3;
                    break;
                case 'costa-rica':
                    acidity = 4;
                    bitterness = 2;
                    sweetness = 3;
                    body = 3;
                    complexity = 3;
                    break;
                case 'kenya':
                    acidity = 5;
                    bitterness = 2;
                    sweetness = 3;
                    body = 2;
                    complexity = 4;
                    break;
                case 'guatemala':
                    acidity = 4;
                    bitterness = 2;
                    sweetness = 4;
                    body = 3;
                    complexity = 4;
                    break;
            }
            
            // Update sliders and values
            document.getElementById('acidity-slider').value = acidity;
            document.getElementById('acidity-value').textContent = acidity;
            characteristics.acidity = acidity;
            
            document.getElementById('bitterness-slider').value = bitterness;
            document.getElementById('bitterness-value').textContent = bitterness;
            characteristics.bitterness = bitterness;
            
            document.getElementById('sweetness-slider').value = sweetness;
            document.getElementById('sweetness-value').textContent = sweetness;
            characteristics.sweetness = sweetness;
            
            document.getElementById('body-slider').value = body;
            document.getElementById('body-value').textContent = body;
            characteristics.body = body;
            
            document.getElementById('complexity-slider').value = complexity;
            document.getElementById('complexity-value').textContent = complexity;
            characteristics.complexity = complexity;
            
            // Update summary
            document.getElementById('summary-acidity').textContent = acidity;
            document.getElementById('summary-bitterness').textContent = bitterness;
            document.getElementById('summary-sweetness').textContent = sweetness;
            document.getElementById('summary-body').textContent = body;
            document.getElementById('summary-complexity').textContent = complexity;
            
            // Update chart
            updateFlavorChart();
        }
        
        function updateCharacteristicsBasedOnRoast(roast) {
            // Don't override if no country selected yet
            if (!selectedCountry) return;
            
            // Get current values
            let acidity = characteristics.acidity;
            let bitterness = characteristics.bitterness;
            let sweetness = characteristics.sweetness;
            let body = characteristics.body;
            
            // Adjust based on roast
            switch(roast) {
                case 'light':
                    // Increase acidity, decrease bitterness
                    acidity = Math.min(5, acidity + 1);
                    bitterness = Math.max(1, bitterness - 1);
                    body = Math.max(1, body - 1);
                    break;
                case 'medium':
                    // Balance
                    // No changes, keep country profile
                    break;
                case 'dark':
                    // Decrease acidity, increase bitterness and body
                    acidity = Math.max(1, acidity - 1);
                    bitterness = Math.min(5, bitterness + 1);
                    body = Math.min(5, body + 1);
                    break;
            }
            
            // Update sliders and values
            document.getElementById('acidity-slider').value = acidity;
            document.getElementById('acidity-value').textContent = acidity;
            characteristics.acidity = acidity;
            
            document.getElementById('bitterness-slider').value = bitterness;
            document.getElementById('bitterness-value').textContent = bitterness;
            characteristics.bitterness = bitterness;
            
            document.getElementById('body-slider').value = body;
            document.getElementById('body-value').textContent = body;
            characteristics.body = body;
            
            // Update summary
            document.getElementById('summary-acidity').textContent = acidity;
            document.getElementById('summary-bitterness').textContent = bitterness;
            document.getElementById('summary-body').textContent = body;
            
            // Update chart
            updateFlavorChart();
        }
        
        function updateCharacteristicsBasedOnBean(bean) {
            // Don't override if no country or roast selected yet
            if (!selectedCountry || !selectedRoast) return;
            
            // Get current values
            let acidity = characteristics.acidity;
            let bitterness = characteristics.bitterness;
            let body = characteristics.body;
            let complexity = characteristics.complexity;
            
            // Adjust based on bean type
            switch(bean) {
                case 'arabica':
                    // Higher acidity, more complexity
                    acidity = Math.min(5, acidity + 1);
                    bitterness = Math.max(1, bitterness - 1);
                    complexity = Math.min(5, complexity + 1);
                    break;
                case 'robusta':
                    // Higher bitterness, stronger body
                    acidity = Math.max(1, acidity - 1);
                    bitterness = Math.min(5, bitterness + 1);
                    body = Math.min(5, body + 1);
                    complexity = Math.max(1, complexity - 1);
                    break;
                case 'liberica':
                    // More body, unique complexity
                    body = Math.min(5, body + 1);
                    complexity = Math.min(5, complexity + 1);
                    break;
            }
            
            // Update sliders and values
            document.getElementById('acidity-slider').value = acidity;
            document.getElementById('acidity-value').textContent = acidity;
            characteristics.acidity = acidity;
            
            document.getElementById('bitterness-slider').value = bitterness;
            document.getElementById('bitterness-value').textContent = bitterness;
            characteristics.bitterness = bitterness;
            
            document.getElementById('body-slider').value = body;
            document.getElementById('body-value').textContent = body;
            characteristics.body = body;
            
            document.getElementById('complexity-slider').value = complexity;
            document.getElementById('complexity-value').textContent = complexity;
            characteristics.complexity = complexity;
            
            // Update summary
            document.getElementById('summary-acidity').textContent = acidity;
            document.getElementById('summary-bitterness').textContent = bitterness;
            document.getElementById('summary-body').textContent = body;
            document.getElementById('summary-complexity').textContent = complexity;
            
            // Update chart
            updateFlavorChart();
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize progress bar
            updateProgress(1);
            
            // Initialize ratio calculator
            calculateRatio();
            
            // Update chart on load
            updateFlavorChart();
            
            // Handle click on progress bar steps
            document.querySelectorAll('.step').forEach(step => {
                step.addEventListener('click', function() {
                    const stepNumber = parseInt(this.dataset.step);
                    
                    // Get corresponding section
                    let targetId;
                    switch(stepNumber) {
                        case 1:
                            targetId = 'country-selection';
                            break;
                        case 2:
                            targetId = 'roast-selection';
                            break;
                        case 3:
                            targetId = 'bean-selection';
                            break;
                        case 4:
                            targetId = 'characteristics-selection';
                            break;
                        case 5:
                            targetId = 'prepare-coffee';
                            break;
                        case 6:
                            targetId = 'share-section';
                            break;
                    }
                    
                    if (targetId) {
                        const targetElement = document.getElementById(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });
            
            // Handle scroll for progress bar
            window.addEventListener('scroll', function() {
                const sections = [
                    { id: 'country-selection', step: 1 },
                    { id: 'roast-selection', step: 2 },
                    { id: 'bean-selection', step: 3 },
                    { id: 'characteristics-selection', step: 4 },
                    { id: 'prepare-coffee', step: 5 },
                    { id: 'share-section', step: 6 }
                ];
                
                const scrollPosition = window.scrollY + 200; // Offset for better tracking
                
                for (let i = 0; i < sections.length; i++) {
                    const section = document.getElementById(sections[i].id);
                    if (section) {
                        const sectionTop = section.offsetTop;
                        const sectionBottom = sectionTop + section.offsetHeight;
                        
                        if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                            updateProgress(sections[i].step);
                            break;
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
